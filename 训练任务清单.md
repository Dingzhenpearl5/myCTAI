# æ¯•ä¸šè®¾è®¡æ¨¡å‹è®­ç»ƒä»»åŠ¡æ¸…å•

## ğŸ“… è®­ç»ƒæ—¶é—´: 2025å¹´11æœˆ2æ—¥

## ğŸ¯ è®­ç»ƒç›®æ ‡
ä½¿ç”¨æ–°çš„**6:2:2æ‚£è€…çº§åˆ«éšæœºåˆ’åˆ†**é‡æ–°è®­ç»ƒæ‰€æœ‰æ¨¡å‹,å»ºç«‹å…¬å¹³å¯¹æ¯”åŸºå‡†

---

## ğŸ“Š æ•°æ®åˆ’åˆ†ä¿¡æ¯

### æ–°åˆ’åˆ† (6:2:2 éšæœºæ‚£è€…çº§åˆ«)
- **æ€»æ‚£è€…æ•°**: 107
- **è®­ç»ƒé›†**: 64æ‚£è€… (60%)
- **éªŒè¯é›†**: 21æ‚£è€… (20%)
- **æµ‹è¯•é›†**: 22æ‚£è€… (20%)
- **éšæœºç§å­**: 42
- **åˆ’åˆ†æ–‡ä»¶**: `src/data_split_info.json`

### ä¸æ—§åˆ’åˆ†å¯¹æ¯”
| åˆ’åˆ†æ–¹å¼ | è®­ç»ƒ | éªŒè¯ | æµ‹è¯• | é—®é¢˜ |
|---------|------|------|------|------|
| **æ—§åˆ’åˆ†** | 96æ‚£è€…(é¡ºåº) | æ—  | 11æ‚£è€…(é¡ºåº) | âŒ æ•°æ®æ³„éœ²,æ— éªŒè¯é›† |
| **æ–°åˆ’åˆ†** | 64æ‚£è€…(éšæœº) | 21æ‚£è€… | 22æ‚£è€… | âœ… æ— æ³„éœ²,æœ‰éªŒè¯é›† |

---

## ğŸš€ è®­ç»ƒä»»åŠ¡åˆ—è¡¨

### âœ… ä»»åŠ¡1: ä¿®å¤æ•°æ®åˆ’åˆ†
- [x] æ·»åŠ éšæœºæ‰“ä¹±åŠŸèƒ½
- [x] ä¿å­˜åˆ’åˆ†ä¿¡æ¯åˆ°JSON
- [x] ç¡®ä¿æ‚£è€…çº§åˆ«åˆ†ç¦»

### ğŸ”„ ä»»åŠ¡2: UNet+AttentionGate åŸºçº¿é‡è®­ç»ƒ
- **çŠ¶æ€**: ğŸƒ è®­ç»ƒä¸­...
- **è„šæœ¬**: `CTAI_model/net/train_unet_new_split.py`
- **æ¨¡å‹ä¿å­˜**:
  - æœ€ä½³: `checkpoints/unet_622split_best.pth`
  - æœ€ç»ˆ: `checkpoints/unet_622split_final.pth`
- **æŠ¥å‘Š**: `checkpoints/unet_622split_report.txt`
- **é¢„è®¡æ—¶é—´**: ~2-3å°æ—¶
- **å‚æ•°é‡**: 31.39M
- **æ—§æ€§èƒ½**: è®­ç»ƒ92.57%, æµ‹è¯•85.42% (æœ‰æ³„éœ²)
- **é¢„æœŸæ€§èƒ½**: è®­ç»ƒ85-90%, æµ‹è¯•78-83%

### â³ ä»»åŠ¡3: TransUNet å®Œæ•´ç‰ˆè®­ç»ƒ
- **çŠ¶æ€**: â¸ï¸ ç­‰å¾…UNetå®Œæˆ
- **è„šæœ¬**: `CTAI_model/net/train_transunet.py`
- **æ¨¡å‹ä¿å­˜**:
  - æœ€ä½³: `checkpoints/transunet_622split_best.pth`
  - æœ€ç»ˆ: `checkpoints/transunet_622split_final.pth`
- **æŠ¥å‘Š**: `logs/transunet_622split_report.md`
- **é¢„è®¡æ—¶é—´**: ~3-4å°æ—¶
- **å‚æ•°é‡**: 93.42M
- **ç›®æ ‡æ€§èƒ½**: è¶…è¶ŠUNetåŸºçº¿ 2-5%

### â³ ä»»åŠ¡4: TransUNetLite è½»é‡ç‰ˆè®­ç»ƒ
- **çŠ¶æ€**: â¸ï¸ å¯é€‰,æ ¹æ®TransUNetè¡¨ç°å†³å®š
- **è„šæœ¬**: `CTAI_model/net/train_transunet.py` (ä¿®æ”¹config)
- **æ¨¡å‹ä¿å­˜**:
  - æœ€ä½³: `checkpoints/transunet_lite_622split_best.pth`
  - æœ€ç»ˆ: `checkpoints/transunet_lite_622split_final.pth`
- **é¢„è®¡æ—¶é—´**: ~2.5-3.5å°æ—¶
- **å‚æ•°é‡**: 14.11M
- **ä¼˜åŠ¿**: æ›´å°‘å‚æ•°,æ›´å¿«è®­ç»ƒ,æ›´é€‚åˆ4GBæ˜¾å­˜

---

## ğŸ“¦ æ¨¡å‹ä¿å­˜è§„èŒƒ

### å‘½åè§„åˆ™
```
{æ¨¡å‹å}_{æ•°æ®åˆ’åˆ†}_{ç±»å‹}.pth

ç¤ºä¾‹:
- unet_622split_best.pth        # UNetæœ€ä½³æ¨¡å‹(6:2:2åˆ’åˆ†)
- transunet_622split_final.pth   # TransUNetæœ€ç»ˆæ¨¡å‹
- transunet_lite_622split_best.pth  # TransUNetLiteæœ€ä½³æ¨¡å‹
```

### ä¿å­˜å†…å®¹
æ¯ä¸ªè®­ç»ƒä»»åŠ¡ä¿å­˜:
1. **æœ€ä½³æ¨¡å‹** (`*_best.pth`): éªŒè¯é›†Diceæœ€é«˜çš„checkpoint
2. **æœ€ç»ˆæ¨¡å‹** (`*_final.pth`): è®­ç»ƒç»“æŸæ—¶çš„æ¨¡å‹
3. **è®­ç»ƒæŠ¥å‘Š** (`*_report.txt/md`): é…ç½®ã€æ€§èƒ½æŒ‡æ ‡ã€å¯¹æ¯”åˆ†æ
4. **è®­ç»ƒå†å²** (`*_history.json`): æ¯ä¸ªepochçš„è¯¦ç»†æŒ‡æ ‡
5. **è®­ç»ƒæ›²çº¿** (`*_curves.png`): å¯è§†åŒ–å›¾è¡¨

---

## ğŸ“ˆ æ€§èƒ½å¯¹æ¯”é¢„æœŸ

| æ¨¡å‹ | å‚æ•°é‡ | è®­ç»ƒDice | éªŒè¯Dice | æµ‹è¯•Dice | è®­ç»ƒæ—¶é•¿ |
|------|--------|----------|----------|----------|----------|
| UNet (æ—§) | 31.39M | 92.57% | - | 85.42% | - |
| **UNet (æ–°)** | 31.39M | 85-90% | 80-85% | 78-83% | 2-3h |
| **TransUNet** | 93.42M | 88-92% | 83-88% | 81-86% | 3-4h |
| **TransUNetLite** | 14.11M | 86-90% | 82-86% | 80-84% | 2.5-3.5h |

*æ³¨: æ—§æ€§èƒ½å¯èƒ½å› æ•°æ®æ³„éœ²è€Œè™šé«˜*

---

## âš ï¸ å·²çŸ¥é—®é¢˜

### é—®é¢˜1: TransUNetä¸Šæ¬¡è®­ç»ƒå¤±è´¥
- **ç°è±¡**: Diceä»…0.01,æ¨¡å‹é¢„æµ‹å…¨0
- **å¯èƒ½åŸå› **:
  1. å­¦ä¹ ç‡å¤ªä½ (1e-4 å¯¹93Må‚æ•°)
  2. ç±»åˆ«ä¸¥é‡ä¸å¹³è¡¡
  3. åˆå§‹åŒ–ä¸å½“
- **è§£å†³æ–¹æ¡ˆ**:
  - è§‚å¯ŸUNetè®­ç»ƒæƒ…å†µ
  - å¿…è¦æ—¶è°ƒæ•´TransUNetå­¦ä¹ ç‡åˆ°1e-3
  - è€ƒè™‘æ·»åŠ Focal Loss

### é—®é¢˜2: é¡ºåºåˆ’åˆ†åå·®
- **ç°è±¡**: UNetåœ¨æ—§é¡ºåºåˆ’åˆ†æµ‹è¯•é›†ä»…56%
- **åŸå› **: è®­ç»ƒæ‚£è€…1001-1065,æµ‹è¯•æ‚£è€…1087-1108,æ—¶é—´åå·®
- **å·²è§£å†³**: âœ… é‡‡ç”¨éšæœºæ‰“ä¹±åˆ’åˆ†

---

## ğŸ” ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### å½“å‰è¿›è¡Œä¸­
1. âœ… ç›‘æ§UNetè®­ç»ƒè¿›åº¦
2. â¸ï¸ å‡†å¤‡TransUNetè®­ç»ƒå‘½ä»¤

### UNetè®­ç»ƒå®Œæˆå
1. åˆ†æUNetåœ¨æ–°åˆ’åˆ†ä¸Šçš„çœŸå®æ€§èƒ½
2. æ ¹æ®UNetè¡¨ç°å†³å®šTransUNeté…ç½®
3. å¯åŠ¨TransUNetè®­ç»ƒ

### æ¯•ä¸šè®ºæ–‡å‡†å¤‡
1. æ•´ç†æ‰€æœ‰æ¨¡å‹æ€§èƒ½å¯¹æ¯”è¡¨
2. åˆ†ææ•°æ®åˆ’åˆ†å¯¹æ€§èƒ½çš„å½±å“
3. æ’°å†™æ¶ˆèå®éªŒéƒ¨åˆ†
4. å‡†å¤‡å¯è§†åŒ–åˆ†å‰²ç»“æœ

---

## ğŸ“ è®­ç»ƒæ—¥å¿—

### 2025-11-02 å½“å‰æ—¶åˆ»
- âœ… ä¿®å¤æ•°æ®åˆ’åˆ†,æ·»åŠ éšæœºæ‰“ä¹±
- âœ… åˆ›å»ºUNetè®­ç»ƒè„šæœ¬
- âœ… æ›´æ–°TransUNetä¿å­˜è·¯å¾„
- ğŸƒ å¯åŠ¨UNetè®­ç»ƒ (Terminal ID: 799f0a8d-5af6-42d7-9929-b677a588fb2e)
- â¸ï¸ ç­‰å¾…UNetå®Œæˆ,é¢„è®¡2-3å°æ—¶

---

## ğŸ’¾ é‡è¦æ–‡ä»¶è·¯å¾„

### ä»£ç 
- UNetè®­ç»ƒ: `CTAI_model/net/train_unet_new_split.py`
- TransUNetè®­ç»ƒ: `CTAI_model/net/train_transunet.py`
- æ•°æ®åŠ è½½: `CTAI_model/data_set/make.py`

### æ¨¡å‹
- ä¿å­˜ç›®å½•: `CTAI_model/checkpoints/`
- æ—§UNet: `CTAI_model/model_Unet.pth`

### æ—¥å¿—
- æ—¥å¿—ç›®å½•: `CTAI_model/logs/`
- æ•°æ®åˆ’åˆ†: `src/data_split_info.json`

### æ–‡æ¡£
- ä»»åŠ¡æ¸…å•: `è®­ç»ƒä»»åŠ¡æ¸…å•.md` (æœ¬æ–‡ä»¶)
- TransUNetæ¶æ„: `TransUNetæ¶æ„è¯¦è§£.md`
- å®æ–½æŒ‡å—: `TransUNetèåˆå®æ–½æŒ‡å—.md`

---

*æœ€åæ›´æ–°: 2025-11-02*
